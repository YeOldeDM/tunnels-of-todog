extends Node2D



onready var map = $FloorMap
onready var fog = $FogMap

onready var things = []	#Populated by Thing Node refs,
# generated by create_thing() and removed by destroy_thing()




	# PUBLIC FUNCS #


func create_thing( database_path )->Node:
	var new_thing: Node = DATABASE.grab( database_path )
	things.append( new_thing )
	return new_thing

func destroy_thing( thing ):
	things.remove( things.find( thing ) )
	thing.queue_free()




func spawn_player( at_pos:Vector2 = Vector2() )->void:
	
	# Get a Player Thing
	var player = create_thing( "Player" )
	
	# Add it to the map
	map.add_child( player )
	
	# Set up the player
	player.cell = at_pos
	
#	player.connect("spawns", self, "_on_thing_spawns" )
#	player.connect( "despawns", self, "_on_thing_despawns" )
	
	player.seen = true





	# PRIVATE FUNCS #



func _ready():
	spawn_player( Vector2( 12,8 ) )
	




# Signal Callbacks

func _on_thing_spawns( thing ):
	pass # do some shit

func _on_thing_despawns( icon ):
	pass # do some other shit
	
	
	
	
	
	
	

